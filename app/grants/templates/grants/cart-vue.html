{% comment %}
Copyright (C) 2020 Gitcoin Core

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>. {% endcomment %} {% load static i18n %} <!DOCTYPE
  html>
  <html lang="en">

  <head>
    {% include 'shared/head.html' with slim=1 %}
    {% include 'shared/cards_pic.html' %}
    <link rel="stylesheet" href="{% static "v2/css/bounty.css" %}">
    <link rel="stylesheet" href="{% static "v2/css/grants/detail.css" %}">
    <link rel="stylesheet" href={% static "v2/css/tabs.css" %}>
    <link rel="stylesheet" href={% static "v2/css/dashboard.css" %}>
    <link rel="stylesheet" href={% static "v2/css/tag.css" %}>
    <link rel="stylesheet" href="{% static "v2/css/grants/profile.css" %}">
    <link rel="stylesheet" href="{% static "v2/css/town_square.css" %}">
    <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link href="//cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static "v2/css/grants/cart.css" %}">
  </head>

  <body class="interior {{ active }} grant grant-detail g-font-muli">
    {% include 'shared/tag_manager_2.html' %}
    <div class="container-fluid header dash">
      {% include 'shared/top_nav.html' with class='d-md-flex' %}
      {% include 'grants/nav.html' %}
    </div>

    {% include 'grants/shared/waiting_state.html' %}


    <div>
      <div id="gc-grants-cart" v-cloak>
        <grants-cart inline-template>
          <div>

            {% comment %} Heading section {% endcomment %}
            <div class="container" style="margin-top:2rem;">
              <h1 class="text-center font-bigger-2">
                Grant Cart ([[ grantData.length ]] items)
              </h1>
              <img src="{% static 'v2/images/grants/torchbearer.svg' %}" alt="Robot with torch" width="150">
              <div class="font-smaller-1 hyperlink" style="margin: 2rem 0 0 auto;" @click="clearCart">
                Clear my cart
              </div>
            </div>

            {% comment %} Divider {% endcomment %}
            <div>
              <div class="separator" />
            </div>

            {% comment %} Main container {% endcomment %}
            <div v-if="grantData.length === 0" class="flex-container font-bigger-1 text-left grant-header-row"
              style="justify-content: center; margin: 5rem 0">
              Your cart is empty.
            </div>
            <div v-else class="container" style="padding-bottom: 10rem;">
              {% comment %} Cart header {% endcomment %}
              <div class="flex-container font-smaller-2 text-left grant-header-row">
                <div style="width: 25%">
                  <div class="flex-container" style="justify-content: start">
                    Grant
                  </div>
                </div>
                <div style="width: 20%">
                  Amount
                </div>
                <div style="width: 20%">
                  Type
                </div>
                <div style="width: 15%">
                  <div class="flex-container">
                    Total CLR Match Amount
                  </div>
                </div>
                <div style="width: 3%; opacity: 40%; margin-left: 5rem;">
                  &nbsp;
                </div>
              </div>
              {% comment %} Cart contents {% endcomment %}
              <div v-for="grant in grantData" class="grant-row">
                <div class="grant-row-style">
                  <div class="flex-container">
                    {% comment %} Title and logo {% endcomment %}
                    <div style="width: 25%">
                      <div class="flex-container" style="justify-content: start">
                        <img :src="grant.grant_logo" alt="Grant logo" width="30">
                        <div class="grant-name black">[[grant.grant_title]]</div>
                      </div>
                    </div>
                    {% comment %} Grant amount and currency {% endcomment %}
                    <div style="width: 20%; padding-right: 2rem">
                      <div class="flex-container" style="justify-content: start">
                        <div style="width: 60%; margin-right: 1rem">
                          <input class="form-control" v-model.number="grant.grant_donation_amount" type="number"
                            placeholder="Amount">
                        </div>
                        <div class="form__select2" style="width: 60%">
                          <select2 :options="currencies" v-model="grant.grant_donation_currency" class="form-control"
                            placeholder="Select token">
                          </select2>
                        </div>
                      </div>
                      <div class="font-smaller-3">
                        + Add comment to owner
                      </div>
                    </div>
                    {% comment %} Grant type {% endcomment %}
                    <div style="width: 20%">
                      <div class="flex-container font-smaller-3" style="justify-content: start">
                        split accross
                        <input class="form-control" v-model.number="grant.grant_donation_num_rounds" type="number"
                          placeholder="Amount" style="width: 25%; margin: 0 0.5rem;">
                        CLR round<span v-if="grant.grant_donation_num_rounds !== 1">s</span>
                      </div>
                    </div>
                    {% comment %} CLR match amount {% endcomment %}
                    <div class="clr-match-box" style="width: 15%;">
                      <div class="flex-container">
                        <div>
                          [[grant.grant_donation_clr_match]] [[grant.grant_donation_currency]]
                        </div>
                        <img src="{% static 'v2/images/diamonds_high_fiving.gif' %}" alt="Diamonds high-fiving"
                          width="20">
                      </div>
                    </div>
                    {% comment %} Delete icon {% endcomment %}
                    <div style="width: 3%; opacity: 40%; margin-left: 5rem;">
                      <i class="fas fa-trash-alt" style="cursor: pointer"
                        @click="removeGrantFromCart(grant.grant_id)"></i>
                    </div>
                  </div>
                </div>
              </div>

              {% comment %} Cart total {% endcomment %}
              <div class="flex-container font-bigger-1 text-left grant-header-row black" style="font-weight: bold">
                <div style="width: 25%">
                  <div class="flex-container" style="justify-content: start">
                    TOTAL
                  </div>
                </div>
                <div style="width: 75%">
                  <div class="flex-container" style="justify-content: start">
                    [[donationTotalsString]]
                  </div>
                </div>
              </div>

              {% comment %} Hide wallet option {% endcomment %}
              <div class="flex-container text-left cart-section black">
                <div style="width: 100%">
                  <div class="flex-container" style="justify-content: start">
                    <div>
                      <input type="checkbox" name="hide_wallet_address" id="hide_wallet_address"
                        {% if profile.hide_wallet_address %} checked="checked" {% endif %}>
                      <span class="font-smaller-1 darker-gray"
                        for="hide_wallet_address">{% trans "Hide my wallet address" %}</span>
                      <span id="hide_wallet_address_help" class="font-smaller-2 medium-dark-gray"
                        style="margin-left: 0.5rem;">
                        {% trans "If this option is chosen, your wallet address will be hidden" %}</span>
                    </div>
                  </div>
                </div>
              </div>

              {% comment %} Contribution to Gitcoin notice {% endcomment %}
              <div class="flex-container text-left cart-section black" style="margin-top: 1rem">
                <div style="width: 100%">
                  <div class="flex-container" style="justify-content: start">
                    <div>
                      {% trans "By using this service, youâ€™ll also be contributing" %}
                      <span class="gitcoin-grant-percent">5</span>{% trans "% of your contribution to the" %}
                      <a href="https://gitcoin.co/grants/86/gitcoin-sustainability-fund" target="blank">Gitcoin Grants
                        Round 6+ Development Fund <i class="fas fa-external-link-alt"></i></a>.
                    </div>
                  </div>
                </div>
              </div>

              {% comment %} Summary {% endcomment %}
              <div class="flex-container font-bigger-1 text-left grant-header-row black"
                style="font-weight: bold; margin-top: 3rem;">
                <div style="width: 100%">
                  <div class="flex-container" style="justify-content: start">
                    SUMMARY
                  </div>
                </div>
              </div>

              <div class="flex-container text-left cart-section black">
                <div style="width: 100%">
                  <div class="flex-container" style="justify-content: start">
                    <ul>
                      <li>
                        You are contributing <span style="font-weight: bold">[[donationTotalsString]]</span>
                      </li>
                      <li>
                        You are additionally contributing
                        <span style="font-weight: bold">[[donationsToGitcoinString]]</span>
                        to the Gitcoin Mainainter Grant
                      </li>
                      <li>
                        Note: You will have to approve 2 transactions via your Web3 wallet on submit. Read how this
                        works.
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="flex-container" style="margin-top: 3rem;">
                <div style="width: 100%">
                  <div class="flex-container" style="justify-content: start">
                    <button class="btn btn-gc-blue button--full shadow-none py-3" id='js-fundGrants-button'>
                      Fund [[this.grantData.length]] Items
                    </button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </grants-cart>
      </div>
    </div>


    <script type="text/x-template" id="select2-template">
      <select>
        <slot></slot>
      </select>
    </script>

    {% include 'shared/current_profile.html' %}
    {% include 'shared/bottom_notification.html' %}
    {% include 'shared/analytics.html' %}
    {% include 'shared/footer_scripts.html' with ignore_inject_web3=1 %}
    {% include 'shared/footer.html' %}
    {% include 'grants/shared/shared_scripts.html' %}

    <script src="{% static "v2/js/vue-components.js" %}"></script>
    <script src="{% static "v2/js/cart.js" %}"></script>
  </body>

  {% include 'shared/activity_scripts.html' %}
  <link rel="stylesheet" href="{% static "v2/css/activity_stream.css" %}">
  <script src="{% static "v2/js/status.js" %}"></script>
  <script src="{% static "v2/js/pages/tabs.js" %}"></script>
  <script src="{% static "v2/js/grants/index.js" %}"></script>
  <script src="{% static "v2/js/grants/info.js" %}"></script>
  <script src="{% static "v2/js/grants/compiledSplitter.js" %}"></script>
  <script src="{% static "v2/js/grants/compiledSubscriptionContract0.js" %}"></script>
  <script src="{% static "v2/js/grants/compiledSubscriptionContract1.js" %}"></script>
  <script src="{% static "v2/js/abi.js" %}"></script>
  <script src="{% static "v2/js/pages/shared_bounty_mutation_estimate_gas.js" %}"></script>
  <script src="{% static "v2/js/lib/ipfs-api.js" %}"></script>
  <script src="{% static "v2/js/ipfs.js" %}"></script>
  <script>
    $('[data-toggle="tooltip"]').bootstrapTooltip();

  </script>
  <script src="{% static "v2/js/user-search.js" %}"></script>
  <script src="{% static "v2/js/grants/shared.js" %}"></script>
  <script src="{% static "v2/js/grants/detail.js" %}"></script>
  <script src="{% static "v2/js/waiting_room_entertainment.js" %}"></script>
  <script>
    $('#wallet-address').attr(
      'href',
      get_etherscan_url(
        $('#wallet-address').text().trim(),
        '{{ grant.network }}',
        'address'
      )
    );

  </script>

  </html>
